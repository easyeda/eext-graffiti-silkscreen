<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Imgbb Upload</title>
<script>
/**
 * 选择文件上传
 * 
 * 解析响应展示
 *
 */
async function upload() 
{
    const apiKey = '93ecff6c249ca51c6ee0fb5a4b7d7c8a';
	const imgFile = document.getElementById('imgFile').files[0];
	const formData = new FormData();
	let expiration = document.getElementById('expiration').value;
	formData.append('image', imgFile);

	// 接口请求
	console.log('正在上传图片到图床...');
	document.getElementById('output').innerHTML = `<h2>上传中</h2>`
	const response = await fetch(`https://api.imgbb.com/1/upload?expiration=${expiration}&key=${apiKey}`, {
		method: 'POST',
		body: formData
	});

	//解析响应
	const data = await response.json();
	if (response.ok && data.success) 
	{
	console.log(data);
	document.getElementById('output').innerHTML = `
		<h2>上传成功</h2>
		<img src="${data.data.url}" alt="Uploaded Image" width="20%" hight="20%"/>
		<p>Viewer URL: <a href="${data.data.url_viewer}" target="_blank">${data.data.url_viewer}</a></p>
		<p>Display URL: <a href="${data.data.display_url}" target="_blank">${data.data.display_url}</a></p>
		<p>Width: ${data.data.width}</p>
		<p>Height: ${data.data.height}</p>
		<p>Size: ${data.data.size}</p>
		<p>Uploaded at: ${data.data.time}</p>
		<p>Expiration: ${data.data.expiration}</p>
		<p>Delete URL: <a href="${data.data.delete_url}" target="_blank">Delete Image</a></p>
	`;
    }

}

</script>
</head>
<body>


<input type="file" id="imgFile" accept="image/*">
<input type="text" id="expiration" placeholder="过期时间（秒）">
<button onclick="upload()">上传文件到图床</button>
<div id="output"></div>

</body>
</html>
